(window["webpackJsonphdo-inventory-management-system"]=window["webpackJsonphdo-inventory-management-system"]||[]).push([[0],{22:function(e,t,a){e.exports=a(47)},27:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(19),c=a.n(r),i=(a(27),a(7)),l=a.n(i),s=a(9),u=a(2),m=a(3),d=a(5),g=a(4),f=a(6),y=a(20),p=a.n(y),h=function(){var e=Object(s.a)(l.a.mark(function e(t,a){var n,o,r,c=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>2&&void 0!==c[2]?c[2]:"",o=c.length>3?c[3]:void 0,e.next=4,p()({async:!0,crossDomain:!0,url:a,method:t,headers:o,data:JSON.stringify(n)}).then(function(e){return e.data}).catch(function(e){alert(e)});case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),b=function(e){function t(){return Object(u.a)(this,t),Object(d.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(m.a)(t,[{key:"renderTableHeader",value:function(){return this.props.tableHeaderConfig.map(function(e,t){return o.a.createElement("th",{key:"".concat(t,"-").concat(e)},e.toUpperCase())})}},{key:"renderTableData",value:function(){return this.props.tableBodyConfig.map(function(e,t){return e.key="".concat((new Date).getTime(),"-").concat(t,"-").concat(e.title),o.a.createElement(o.a.Fragment,{key:"".concat(e.title,"-").concat(e.price)},o.a.createElement("tr",null,o.a.createElement("td",null,e.title),o.a.createElement("td",null,e.price)))})}},{key:"render",value:function(){var e=this.props.className;return o.a.createElement("table",{className:e},o.a.createElement("thead",null,o.a.createElement("tr",null,this.renderTableHeader())),o.a.createElement("tbody",null,this.renderTableData()))}}]),t}(n.Component),k=a(21),v=a(8);function E(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(g.a)(t).call(this,e))).mergeArrayOfObjects=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"key";return t.forEach(function(t){var n=e.findIndex(function(e){return e[a]===t[a]});n>=0?e.splice(n,1,t):e.push(t)}),e},a.state={category:e.edit?e.categoryData.category:"",bookList:e.edit?e.categoryData.bookList:[]},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"handleFormChange",value:function(e){if(e.target.name.indexOf("category")>-1)this.setState({category:e.target.value});else{var t=Object(v.a)(this.state.bookList),a=e.target.dataset.id,n=e.target.className;t[a][n]="price"===n?e.target.value>=0&&""!==e.target.value?parseInt(e.target.value,10):"":e.target.value.trim(),this.setState({bookList:t})}}},{key:"addBook",value:function(e){this.setState(function(e){return{bookList:[].concat(Object(v.a)(e.bookList),[{title:"",price:0}])}})}},{key:"handleFormSubmit",value:function(e){var t=this;e.preventDefault();var a=this.state,n=a.category,o=a.bookList,r=JSON.parse(localStorage.getItem("BookData")),c=!1;if(r.find(function(e){if(e.category===n&&!o.length)return c=!0,!0;if(e.category===n&&o.length){var a=t.mergeArrayOfObjects(e.bookList,o,"title");e.bookList=Object(v.a)(a),c=!0}}),!c)if(o.length>0){var i=this.mergeArrayOfObjects([o[0]],o,"title"),l=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(a,!0).forEach(function(t){Object(k.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):E(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},this.state,{},{bookList:i});r=[].concat(Object(v.a)(r),[l])}else r=[].concat(Object(v.a)(r),[this.state]);localStorage.setItem("BookData",JSON.stringify(r)),this.props.updateBookCategory(r)}},{key:"render",value:function(){var e=this,t=this.state.bookList;return o.a.createElement("div",{className:"form-wrap"},o.a.createElement("div",{className:"form-scroll"},o.a.createElement("form",{onSubmit:function(t){e.handleFormSubmit(t)}},o.a.createElement("fieldset",null,o.a.createElement("legend",{htmlFor:"category"},"Category"),o.a.createElement("input",{type:"text",name:"".concat(this.state.category,"-category"),id:"".concat(this.state.category,"-category"),value:this.state.category,onChange:function(t){e.handleFormChange(t)}}),o.a.createElement("button",{type:"button",onClick:function(t){e.addBook(t)}},"Add new book")),t&&o.a.createElement("fieldset",null,o.a.createElement("legend",{htmlFor:"books"},"Books"),t.map(function(a,n){a.title,a.price;var r="book-".concat(n),c="price-".concat(n);return o.a.createElement("div",{key:"bookDetail-".concat(n)},o.a.createElement("fieldset",null,o.a.createElement("legend",{htmlFor:r},"Book Title"),o.a.createElement("input",{type:"text",placeholder:"Book Title",name:r,"data-id":n,id:r,className:"title",value:t[n].title,onChange:function(t){e.handleFormChange(t)}})),o.a.createElement("fieldset",null,o.a.createElement("legend",{htmlFor:c},"Book Price"),o.a.createElement("input",{type:"text",name:c,"data-id":n,id:c,className:"price",value:t[n].price,onChange:function(t){e.handleFormChange(t)}})))})),o.a.createElement("input",{type:"submit",value:"Submit"}))))}}]),t}(o.a.Component),C=function(e){function t(){var e,a;Object(u.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(g.a)(t)).call.apply(e,[this].concat(o)))).state={editCategory:!1,categoryData:{}},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"renderTableHeader",value:function(){return this.props.tableHeaderConfig.map(function(e,t){return o.a.createElement("th",{key:"".concat(t,"-").concat(e)},e.toUpperCase())})}},{key:"renderTableData",value:function(){var e=this,t=this.props,a=t.tableBodyConfig,n=t.showBookList,r=t.isExpanded;return a.map(function(t,a){var c=t.category,i=t.bookList,l=t.key,s=i.length>0&&Object.keys(i[0]);return s=s.filter(function(e){if("key"!==e)return e}),o.a.createElement(o.a.Fragment,{key:"".concat(c,"-").concat(i.length)},o.a.createElement("tr",null,o.a.createElement("td",null,o.a.createElement("a",{title:c,onClick:function(e){n(e,c)}},c)),o.a.createElement("td",null,i.length),o.a.createElement("td",null,o.a.createElement("button",{onClick:function(){e.editBookForm({category:c,bookList:i})}},"Edit"),o.a.createElement("button",{onClick:function(){e.props.deleteCategory(l)}},"Delete"))),r===c&&o.a.createElement("tr",null,i.length?o.a.createElement("td",{colSpan:"3"},o.a.createElement(b,{className:"sub-table",tableHeaderConfig:s,tableBodyConfig:i})):o.a.createElement("td",{colSpan:"3"},o.a.createElement("span",null,"No books available"))))})}},{key:"editBookForm",value:function(e){this.setState({editCategory:!0,categoryData:e})}},{key:"updateBookData",value:function(e){this.setState({editCategory:!1}),this.props.updateBookCategory(e)}},{key:"render",value:function(){var e=this,t=this.props.className,a=this.state,n=a.editCategory,r=a.categoryData;return o.a.createElement(o.a.Fragment,null,o.a.createElement("table",{className:t},o.a.createElement("thead",null,o.a.createElement("tr",null,this.renderTableHeader())),o.a.createElement("tbody",null,this.renderTableData())),n&&o.a.createElement(O,{edit:!0,categoryData:r,updateBookCategory:function(t){e.updateBookData(t)}}))}}]),t}(n.Component),j=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(g.a)(t).call(this,e))).state={expandCategory:""},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(s.a)(l.a.mark(function e(){var t,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={"content-type":"application/json"},"./APIs/bookListData.json","GET",e.next=5,h("GET","./APIs/bookListData.json","",t);case 5:a=(a=e.sent).map(function(e,t){return e.key="".concat((new Date).getTime(),"-").concat(t),e}),localStorage.setItem("BookData",JSON.stringify(a)),this.setState({categoryDataConfig:a,categoryheaderConfig:["Category Name","Total Books","Actions"]});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"updateBookCategory",value:function(e){this.setState({categoryDataConfig:e,openBookForm:!1})}},{key:"deleteCategory",value:function(e){var t=JSON.parse(localStorage.getItem("BookData"));t=t.filter(function(t){if(t.key!==e)return t}),localStorage.setItem("BookData",JSON.stringify(t)),this.setState({categoryDataConfig:t})}},{key:"showBookList",value:function(e,t){this.setState({expandCategory:t})}},{key:"openBookFormModal",value:function(){this.setState({openBookForm:!0})}},{key:"render",value:function(){var e=this,t=this.state,a=t.categoryheaderConfig,n=t.categoryDataConfig,r=t.expandCategory,c=t.openBookForm;return o.a.createElement("div",{className:"book-lib"},o.a.createElement("button",{onClick:function(t){e.openBookFormModal(t)}},"Add New Category"),a&&n&&o.a.createElement(C,{className:"accordian-table",tableHeaderConfig:this.state.categoryheaderConfig,tableBodyConfig:this.state.categoryDataConfig,showBookList:function(t,a){e.showBookList(t,a)},isExpanded:r,deleteCategory:function(t){e.deleteCategory(t)},updateBookCategory:function(t){e.updateBookCategory(t)}}),c&&o.a.createElement(O,{edit:!1,categoryData:[],updateBookCategory:function(t){e.updateBookCategory(t)}}))}}]),t}(n.Component);a(46);var B=function(){return o.a.createElement("div",{className:"app"},o.a.createElement(j,null))};c.a.render(o.a.createElement(B,null),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.b45b04e9.chunk.js.map